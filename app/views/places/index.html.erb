<h2>All places</h2>
<% @places.each_with_index do |place,pi| %>
	<div>
		<%= "#{pi+1}. #{place.name}" %><br>
		<% if place.longitude.nil? || place.latitude.nil? %>
			<%= "*this location coordinate is incomplete" %>
		<% else %>
			<%= "latitude: #{place.latitude}, longitude: #{place.longitude}" %>
		<% end %>
	</div>
<% end %>
<p><button onclick="geoFindMe()">Show my location</button></p>
<div id="out"></div>
<script>
	function geoFindMe() {
	  var output = document.getElementById("out");

	  if (!navigator.geolocation){
	    output.innerHTML = "<p>Geolocation is not supported by your browser</p>";
	    return;
	  }

	  function success(position) {
	    var latitude  = position.coords.latitude;
	    var longitude = position.coords.longitude;

	    output.innerHTML = '<p>Latitude is ' + latitude + '° <br>Longitude is ' + longitude + '°</p>';
	  };

	  function error() {
	    output.innerHTML = "Unable to retrieve your location";
	  };

	  output.innerHTML = "<p>Locating…</p>";

	  navigator.geolocation.getCurrentPosition(success, error);
	}
</script>
